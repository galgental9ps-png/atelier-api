:root{
  --gap:16px;
  /* Kachel-Format: 4:3 (75%). Für 1:1 -> 100%, für 16:9 -> 56.25% */
  --ratio-pct: 75%;
  --thumb-bg: #f1f2f5;
  --text:#0e0f12; --muted:#666;
  --surface: rgba(255,255,255,.75);
  --border: rgba(0,0,0,.08);
  --shadow: 0 10px 26px rgba(0,0,0,.08);
}
@media (prefers-color-scheme: dark){
  :root{
    --thumb-bg:#1d2230; --text:#e9ebf1; --muted:#a2a7b7;
    --surface: rgba(25,28,36,.7); --border: rgba(255,255,255,.08);
    --shadow: 0 14px 28px rgba(0,0,0,.45);
  }
}

*{box-sizing:border-box}
body{margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif; color:var(--text); background:#fafafa;}
@media (prefers-color-scheme: dark){ body{ background:#0f1116; } }

.topbar{
  position:sticky; top:0; z-index:2; display:flex; gap:12px; align-items:center; justify-content:space-between;
  padding:12px 16px; background:rgba(255,255,255,.9); border-bottom:1px solid #e7e8ee; backdrop-filter: blur(10px);
}
@media (prefers-color-scheme: dark){ .topbar{ background:rgba(16,18,24,.7); border-bottom-color:#222633; } }
.topbar h1{font-size:18px; margin:0}
.topbar button{padding:8px 12px; border-radius:8px; border:1px solid #d8dbe6; background:#fff; cursor:pointer}
@media (prefers-color-scheme: dark){ .topbar button{ border-color:#30364a; background:#1a1e29; color:#e9ebf1 } }

.status{ text-align:center; color:var(--muted); padding:18px }

main{ max-width:1200px; margin:0 auto; padding: 8px 16px 64px }

.grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--gap);
}

/* Karten: iPhone-sicher gleiche Höhe via Padding-Ratio, Bilder NICHT verzerren (contain) */
.card{
  border:1px solid var(--border); border-radius:14px; overflow:hidden; background:var(--surface);
  box-shadow: var(--shadow); transition: transform .12s ease;
}
.card:hover{ transform: translateY(-2px) }

.thumb{
  position: relative;
  background: var(--thumb-bg);
}
.thumb::before{
  content:"";
  display:block;
  padding-top: var(--ratio-pct);  /* Ratio-Box */
}
.thumb img{
  position:absolute; inset:8px;
  width: calc(100% - 16px);
  height: calc(100% - 16px);
  object-fit: contain;     /* Original-Proportionen beibehalten */
  object-position: center;
  display:block;
  -webkit-user-drag: none;
  user-select: none;
  -webkit-user-select: none;
  image-rendering: auto;
}

.info{ padding:12px 14px 14px }
.title{ font-weight:700; margin:2px 0 6px; line-height:1.2 }
.price{ margin:0; font-weight:700; color:var(--text) }

.footer{
  position:fixed; left:0; right:0; bottom:0; padding:10px 14px; text-align:center; color:var(--muted);
  background: linear-gradient(to top, rgba(255,255,255,.8), transparent);
}
@media (prefers-color-scheme: dark){
  .footer{ background: linear-gradient(to top, rgba(16,18,24,.7), transparent); }
}

.icon-btn{
  position:absolute; top:10px; right:10px; width:40px; height:40px; border-radius:12px;
  border:1px solid var(--border); background:var(--surface); cursor:pointer;
}

/* Modal */
dialog{ border:none; border-radius:16px; width:min(1100px, 96vw); padding:0; }
dialog::backdrop{ background: rgba(0,0,0,.5); }
.modal-body{ display:grid; grid-template-columns: 1fr 320px; gap:16px; padding:16px; }
@media (max-width:820px){ .modal-body{ grid-template-columns:1fr; } }

.canvas{
  width:100%; height:min(80vh, 70dvh);
  background: var(--thumb-bg);
  border-radius:12px; overflow:hidden; position:relative;
  display:flex; align-items:center; justify-content:center;
}
.canvas, #modalImg{
  touch-action: none;        /* iPhone: verhindert Seitenscroll beim Panning/Zoom */
  -webkit-user-select: none; user-select: none;
}
#modalImg{
  will-change: transform;
  transform-origin: center center;  /* sauberer Zoom */
  max-width:none; max-height:none;  /* wir steuern selbst via transform */
}

.meta{ display:flex; flex-direction:column; gap:12px }
.zoomctl{ display:flex; align-items:center; gap:10px }
.link{ text-decoration:none; border:1px solid var(--border); padding:8px 12px; border-radius:8px; }

/* Skeletons */
.skeleton .thumb{ position:relative; overflow:hidden }
.skeleton .thumb::after, .skeleton .line::after{
  content:""; position:absolute; inset:0; background:linear-gradient(90deg, transparent, #fff6, transparent);
  animation: shimmer 1.1s infinite;
}
.skeleton .info{ position:relative }
.skeleton .line{ height:14px; background:#e3e6f0; border-radius:6px; margin:10px 14px }
.skeleton .line.short{ width:40% }
@media (prefers-color-scheme: dark){
  .skeleton .line{ background:#30364a }
}
@keyframes shimmer{ from{transform:translateX(-100%)} to{transform:translateX(100%)} }
