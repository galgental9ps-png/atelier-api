/* ---------- Design Tokens ---------- */
:root{
  --gap:16px;
  /* Kartenformat: 4:3: 75% — 1:1: 100% — 16:9: 56.25% */
  --ratio-pct:75%;
  --text:#0f1220; --muted:#6b7280;
  --glass:rgba(255,255,255,.55);
  --glass-strong:rgba(255,255,255,.7);
  --border:rgba(255,255,255,.35);
  --shadow:0 8px 30px rgba(0,0,0,.18);
}
@media (prefers-color-scheme: dark){
  :root{
    --text:#e9ecf6; --muted:#aab2c7;
    --glass:rgba(18,20,28,.45);
    --glass-strong:rgba(18,20,28,.6);
    --border:rgba(255,255,255,.12);
  }
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* ---------- Animated Background ---------- */
.bg{ position:fixed; inset:0; overflow:hidden; z-index:-2; }
.blob{
  position:absolute; filter: blur(60px); opacity:.65; mix-blend-mode: screen;
  width:46vmax; height:46vmax; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #8ec5ff, #6f7dff 45%, #7a4cff 70%, transparent 72%);
  animation: drift 18s ease-in-out infinite alternate;
}
.b2{ left:55%; top:-10%; width:52vmax; height:52vmax; animation-duration:22s;
  background: radial-gradient(circle at 30% 30%, #ffd1e3, #ff7bd5 45%, #ff5183 70%, transparent 72%);
}
.b3{ left:-10%; bottom:-15%; width:50vmax; height:50vmax; animation-duration:20s;
  background: radial-gradient(circle at 30% 30%, #c0ffc6, #53f1a8 45%, #14d2b8 70%, transparent 72%);
}
@keyframes drift{
  0%{ transform: translate3d(0,0,0) scale(1); }
  100%{ transform: translate3d(5vw, -3vh, 0) scale(1.08); }
}
.noise{
  position:absolute; inset:0; opacity:.06; pointer-events:none;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='.5'/></svg>");
  mix-blend-mode: overlay;
}

/* ---------- Glass Utilities ---------- */
.glass{
  background: var(--glass);
  backdrop-filter: blur(18px) saturate(120%);
  -webkit-backdrop-filter: blur(18px) saturate(120%);
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow: var(--shadow);
}
.glass-strong{
  background: var(--glass-strong);
  backdrop-filter: blur(18px) saturate(140%);
  -webkit-backdrop-filter: blur(18px) saturate(140%);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow: var(--shadow);
}

/* ---------- Topbar ---------- */
.topbar{
  position:sticky; top:12px; margin:12px auto; max-width:1200px;
  display:flex; align-items:center; justify-content:space-between; padding:10px 14px;
}
.brand{ display:flex; align-items:center; gap:10px; }
.brand h1{ font-size:18px; margin:0 }

.btn{
  padding:8px 12px; border-radius:10px; border:1px solid var(--border);
  background:rgba(255,255,255,.5); cursor:pointer;
}
@media (prefers-color-scheme: dark){
  .btn{ background:rgba(22,25,34,.6); color:var(--text); }
}
.btn-ghost{
  text-decoration:none; padding:8px 12px; border-radius:10px; border:1px solid var(--border);
  background:transparent; color:inherit;
}

.status{ text-align:center; color:var(--muted); padding:12px }

main{ max-width:1200px; margin:0 auto; padding: 0 16px 80px }

/* ---------- Grid & Cards ---------- */
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: var(--gap);
  margin-top:10px;
}

.card{
  overflow:hidden;
  transition: transform .16s ease, box-shadow .2s ease;
}
.card:hover{ transform: translateY(-3px) scale(1.01); }

.thumb{ position:relative; background:rgba(255,255,255,.35); }
@media (prefers-color-scheme: dark){ .thumb{ background:rgba(0,0,0,.25); } }
.thumb::before{ content:""; display:block; padding-top: var(--ratio-pct); } /* Ratio-Box */

.thumb img{
  position:absolute; inset:10px;
  width: calc(100% - 20px);
  height: calc(100% - 20px);
  object-fit: contain; object-position:center;
  display:block; -webkit-user-drag:none; user-select:none; -webkit-user-select:none;
  transition: transform .35s ease;
}
.card:hover .thumb img{ transform: scale(1.03); }

.info{ padding:12px 14px 14px }
.title{ font-weight:800; margin:2px 0 6px; line-height:1.2 }
.price{ margin:0; font-weight:700 }

/* ---------- Footer ---------- */
.footer{
  position:fixed; left:12px; right:12px; bottom:12px;
  padding:10px 14px; text-align:center; color:var(--muted);
}

/* ---------- Modal ---------- */
dialog{ border:none; padding:0; width:min(1100px, 96vw); }
dialog::backdrop{ background: rgba(8,10,16,.55); }

.modal-body{
  display:grid; grid-template-columns: 1fr 340px; gap:16px; padding:16px;
}
@media (max-width:880px){ .modal-body{ grid-template-columns:1fr; } }

.canvas{
  width:100%; height:min(78vh, 70dvh);
  border-radius:14px; overflow:hidden; position:relative;
  display:flex; align-items:center; justify-content:center;
}

/* Gesten/Zoom */
.canvas, #modalImg{ touch-action:none; -webkit-user-select:none; user-select:none; }
#modalImg{ will-change: transform; transform-origin:center center; max-width:none; max-height:none; }

/* Close-X immer sichtbar */
#closeModal.close{
  position:absolute; top:12px; right:12px; z-index: 9999;
  width:40px; height:40px; border-radius:12px;
  border:1px solid var(--border);
  background: rgba(0,0,0,.55);
  color:#fff; font-size:22px; line-height:1;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
}
#closeModal.close:hover{ background: rgba(0,0,0,.78); }

.meta{ display:flex; flex-direction:column; gap:12px }
.zoomctl{ display:flex; align-items:center; gap:10px }

/* ---------- Skeleton ---------- */
.skeleton .thumb{ position:relative; overflow:hidden }
.skeleton .thumb::after, .skeleton .line::after{
  content:""; position:absolute; inset:0; background:linear-gradient(90deg, transparent, #fff6, transparent);
  animation: shimmer 1.1s infinite;
}
.skeleton .info{ position:relative }
.skeleton .line{ height:14px; background:#ffffff45; border-radius:6px; margin:10px 14px }
.skeleton .line.short{ width:40% }
@keyframes shimmer{ from{transform:translateX(-100%)} to{transform:translateX(100%)} }
