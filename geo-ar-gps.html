<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>3D ohne AR – Bild als Textur</title>
<style>
  html,body{height:100%;margin:0;background:#0b0b0b;font-family:system-ui}
  #c{display:block;width:100%;height:100%}
  #ui{position:fixed;left:50%;top:12px;transform:translateX(-50%);background:#000a;color:#fff;padding:8px 12px;border-radius:12px;font-weight:700}
</style>
</head>
<body>
<canvas id="c"></canvas>
<div id="ui">Zieh mit der Maus / Pinch zum Zoomen</div>

<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script src="https://unpkg.com/three@0.160.0/examples/js/controls/OrbitControls.js"></script>
<script>
const IMG_URL = "https://galgental9ps-png.github.io/atelier-api/echo_der_gedanken.jpg"; // dein Bild

const canvas = document.getElementById('c');
const renderer = new THREE.WebGLRenderer({canvas, antialias:true});
renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
renderer.setSize(innerWidth, innerHeight);

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x111111);

const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.01, 100);
camera.position.set(0, 0, 2.5);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.06;
controls.target.set(0,0,0);

// Licht
const light = new THREE.HemisphereLight(0xffffff, 0x202020, 1.0);
scene.add(light);

// Bild als 3D-Plane
const loader = new THREE.TextureLoader();
loader.setCrossOrigin('anonymous');
loader.load(IMG_URL + "?v=" + Date.now(), (tex)=>{
  tex.colorSpace = THREE.SRGBColorSpace;
  const imgW = tex.source.data.width || 1600;
  const imgH = tex.source.data.height || 1200;
  const ar = imgW / imgH;               // Seitenverhältnis
  const height = 1.2;                    // 1.2 m „virtuell“
  const width  = height * ar;

  const geo = new THREE.PlaneGeometry(width, height);
  const mat = new THREE.MeshBasicMaterial({map: tex, transparent:false});
  const mesh = new THREE.Mesh(geo, mat);
  scene.add(mesh);
}, (xhr)=>{}, (err)=>{
  // Fallback, falls das Bild nicht lädt
  const geo = new THREE.PlaneGeometry(1.6, 1.2);
  const mat = new THREE.MeshBasicMaterial({color:0x444444});
  scene.add(new THREE.Mesh(geo, mat));
});

// Boden-Grid (optional)
const grid = new THREE.GridHelper(10, 20, 0x222222, 0x111111);
grid.position.y = -0.75;
scene.add(grid);

function onResize(){
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
}
addEventListener('resize', onResize);

(function animate(){
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
})();
</script>
</body>
</html>
